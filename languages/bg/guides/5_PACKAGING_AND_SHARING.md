# Ръководство 5: Пакетиране и споделяне на вашия TTS модел

**Навигация:** [Главно README]({{ site.baseurl }}/languages/bg/){: .btn .btn-primary} | [Предишна стъпка: Извеждане](./4_INFERENCE.md){: .btn .btn-primary} |  | [Следваща стъпка: Отстраняване на проблеми и ресурси](./6_TROUBLESHOOTING_AND_RESOURCES.md){: .btn .btn-primary} | 


Вие сте обучили модел и можете да генерирате реч с него. Поздравления! За да гарантирате, че моделът ви ще бъде използваем в бъдеще (от вас или от други) и за да улесните възпроизводимостта, правилното пакетиране и документация са от съществено значение.

---

## 9. Пакетиране на вашия обучен модел

Мислете за вашия обучен модел не просто като за един `.pth` файл, а като за пълен пакет, съдържащ всичко необходимо за разбиране и използване.

### 9.1. Организирайте вашите файлове на модела

Създайте чиста, самостоятелна структура на директориите за всеки отделен обучен модел или значителна версия. Това улеснява намирането на всичко по-късно.

**Примерна структура:**

```
my_tts_model_packages/
└── bulgarian_male_v1.0/         # Описателно име за този пакет на модела
    ├── checkpoints/          # Директория за тегла на модела
    │   ├── best_model.pth    # Контролна точка с най-ниска загуба при валидация (или най-добро възприемано качество)
    │   └── last_model.pth    # Контролна точка от самия край на обучението (по избор, но понякога полезна)
    │
    ├── config.yaml           # ТОЧНИЯТ конфигурационен файл, използван за обучение на ТАЗИ контролна точка
    │
    ├── training_info.md      # По избор: Файл с подробни дневници/бележки за обучението
    │   ├── train_list.txt    # Копие на файла с манифест за обучение, който е използван
    │   └── val_list.txt      # Копие на файла с манифест за валидация, който е използван
    │
    ├── samples/              # Директория с примерно аудио, генерирано от този модел
    │   ├── sample_short_sentence.wav
    │   ├── sample_question.wav
    │   └── sample_longer_paragraph.wav
    │
    └── README.md             # Съществено: Документация, четима от човек, за този конкретен пакет на модела
```

**Обяснение на ключовите компоненти:**

*   **`checkpoints/`**: Съдържа действителните тегла на модела. Винаги включвайте контролната точка, считана за "най-добра" (било то по загуба или по слухови тестове). Включването на финалната контролна точка също е добра практика.
*   **`config.yaml` (или `.json`)**: Абсолютно критично. Този файл дефинира архитектурата на модела и параметрите, необходими за правилно зареждане и използване на контролната точка. Без него контролната точка често е неизползваема. Уверете се, че това е *точната* конфигурация, използвана за включените контролни точки.
*   **`training_info.md` / Манифести (По избор, но препоръчително):** Съхраняването на манифестите помага да се проследи точно върху какви данни е обучен моделът. `training_info.md` може да съдържа бележки за обучението (продължителност, използван хардуер, крайни метрики, наблюдения).
*   **`samples/`**: Включете няколко разнообразни аудио примера, генерирани от `best_model.pth`. Това бързо демонстрира идентичността на гласа на модела, качеството и характеристиките.
*   **`README.md`**: Ръководството за потребителя за този конкретен пакет на модела. Вижте следващия раздел.

### 9.2. Писане на добър README.md за модела

Този README е специфичен за *този пакет на модела*, а не за цялостното ръководство на проекта. Той трябва да казва на всеки (включително на бъдещия вас) всичко, което трябва да знае, за да използва модела.

**Минимален шаблон:**

```markdown
# TTS Пакет на модела: Български мъжки глас v1.0

## Описание на модела
- **Глас:** Ясен, възрастен мъжки глас, говорещ на български.
- **Качество на изходните данни:** Обучен на ~25 часа чисти записи от радио предавания.
- **Език(ци):** Български (основно). Може да има ограничена обработка на английски заемки въз основа на данните за обучение.
- **Стил на говорене:** Формален, наративен/радиоводещ стил.
- **Архитектура на модела:** [Посочете рамка/архитектура, напр. StyleTTS2, VITS]
- **Версия:** 1.0

## Детайли за обучението
- **Базиран на:** Фино настроен от [Посочете базов модел, напр. предварително обучен LibriTTS модел] ИЛИ Обучен от нулата.
- **Данни за обучение:** Вижте включените `train_list.txt` и `val_list.txt`. Общо часове: ~25ч.
- **Ключова конфигурация за обучение:** Вижте включения `config.yaml`.
- **Честота на семплиране:** 22050 Hz (Входното аудио трябва да съответства на тази честота за някои рамки).
- **Време за обучение:** Приблизително 48 часа на 1x NVIDIA RTX 3090.
- **Информация за контролната точка:** `best_model.pth` избран въз основа на най-ниската загуба при валидация на стъпка [XXXXX].

## Как да се използва за извеждане
1.  **Предпоставки:** Уверете се, че имате инсталирана [Посочете името на TTS рамката, напр. StyleTTS2], съвместима с тази версия на модела.
2.  **Конфигурация:** Използвайте включения `config.yaml`.
3.  **Контролна точка:** Заредете файла `checkpoints/best_model.pth`.
4.  **Входен текст:** Предоставете обикновен текстов вход. Нормализацията на текста, съответстваща на данните за обучение (напр. разширяване на числата), може да подобри резултатите.
5.  **ID на говорителя (ако е приложимо):** Това е модел с един говорител. Използвайте ID на говорителя `[Посочете използваното ID, напр. main_speaker]`, ако се изисква от рамката, в противен случай може да не е необходимо.
6.  **Очакван изход:** Аудиото ще бъде генерирано с честота на семплиране 22050 Hz.

## Аудио примери
Слушайте примери, генерирани от този модел:
- [Кратко изречение](./samples/sample_short_sentence.wav)
- [Въпрос](./samples/sample_question.wav)
- [По-дълъг параграф](./samples/sample_longer_paragraph.wav)

## Известни ограничения / Бележки
- Производителността може да се влоши при текст, значително различен от домейна на радио предаванията.
- Не моделира изрично нюансирани емоции.
- [Добавете всякакви други релевантни наблюдения]

## Лицензиране
- **Тегла на модела:** [Посочете лиценз, напр. CC BY-NC-SA 4.0, Само за изследователска/некомерсиална употреба, MIT лиценз - Бъдете точни!]
- **Изходни данни:** [Споменете ограниченията на лиценза на изходните данни, ако те влияят върху използването на модела, напр. "Обучен на собствени данни, модел само за вътрешна употреба."] **Консултирайте се с лиценза на вашите данни за обучение!**
```

### 9.3. Съвети за версиониране на модела

Третирайте вашите обучени модели като софтуерни издания.

*   **Използвайте семантично версиониране (препоръчително):** Използвайте имена като `model_v1.0`, `model_v1.1`, `model_v2.0`.
    *   Увеличете PATCH версията (v1.0 -> v1.0.1) за малки поправки/преобучения със същите данни/конфигурация.
    *   Увеличете MINOR версията (v1.0 -> v1.1) за подобрения, преобучение с повече данни, значителни настройки на конфигурацията.
    *   Увеличете MAJOR версията (v1.0 -> v2.0) за големи промени в архитектурата или пълно преобучение с различни основни данни/цели.
*   **Актуализирайте README файловете:** Когато създавате нова версия, актуализирайте нейния README, за да отразите промените от предишната версия.
*   **Запазете старите версии:** Не изхвърляйте веднага по-старите версии. Понякога предишен модел може да работи по-добре с определени типове текст или може да се наложи да се върнете, ако нова версия въведе регресии. Ако съхранението позволява, архивирайте ги.

### 9.4. Съображения за споделяне и разпространение

Ако планирате да споделите вашия модел:

*   **Пакетиране:** Създайте компресиран архив (напр. `.zip`, `.tar.gz`) на цялата директория на пакета на модела (съдържаща контролни точки, конфигурация, README, примери и т.н.).
*   **Платформи за хостинг:**
    *   **Hugging Face Hub (Models):** Отлична платформа за споделяне на модели, включва версиониране, карти на модели (използвайте съдържанието на вашия README!) и потенциално уиджети за извеждане. Лесно за откриване и използване от други.
    *   **GitHub Releases:** Подходящо за по-малки модели, прикачете zip архива към таг за издаване във вашето хранилище на проекта.
    *   **Облачно съхранение (Google Drive, Dropbox, S3):** Просто за директно споделяне, но по-трудно откриваемо и липсват функции за версиониране. Уверете се, че разрешенията за връзката са зададени правилно.
*   **Лицензиране (КРИТИЧНО):**
    *   **Вашият модел:** Изберете лиценз за *теглата* на модела, които разпространявате (напр. MIT, Apache 2.0 за разрешителни; CC BY-NC-SA за некомерсиално споделяне).
    *   **Зависимост от данните:** **Решаващо, лицензът на вашите данни за обучение често диктува как можете да лицензирате вашия обучен модел.** Ако сте обучавали на данни с некомерсиален лиценз, обикновено не можете да пуснете модела си под разрешителен комерсиален лиценз. Ако сте обучавали на данни с авторски права без разрешение, вероятно изобщо не можете да споделяте модела публично. **Винаги проверявайте лицензите на вашите източници на данни.**
    *   **Лиценз на рамката:** Самият код на TTS рамката има свой собствен лиценз, който е отделен от лиценза на вашия модел.
    *   **Ясно посочете условията за употреба:** Използвайте `README.md` в пакета на вашия модел, за да посочите ясно предназначената употреба (напр. само за изследване, некомерсиална, свободна за всякаква употреба) и условията на лиценза.

---

Правилното пакетиране и документиране на вашите модели ги прави значително по-ценни и използваеми, било то за ваши собствени бъдещи проекти или за сътрудничество и споделяне в общността.

**Следваща стъпка:** [Отстраняване на проблеми и ресурси](./6_TROUBLESHOOTING_AND_RESOURCES.md){: .btn .btn-primary} | 
[Обратно към началото](#top){: .btn .btn-primary}